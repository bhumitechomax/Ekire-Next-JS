{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/xampp/htdocs/next-project-EKIRE/src/app/server/upgrade_plan/page.jsx"],"sourcesContent":["\"use client\";\r\n// import { useParams } from \"next/navigation\";\r\nimport React, { Fragment, useState, useEffect } from \"react\";\r\nimport Cookies from \"js-cookie\";\r\n\r\nfunction UpgragePlan() {\r\n  const [plans, setPlans] = useState([]);\r\n  const [selectedPlanId, setSelectedPlanId] = useState(null);\r\n  const [preserveDisk, setPreserveDisk] = useState(false);\r\n  const [errorMessage, setErrorMessage] = useState(\"\");\r\n  const [statusMessage, setStatusMessage] = useState(\"\");\r\n\r\n  const [formData, setFormData] = useState({\r\n    vms_id: \"\",\r\n    preserve_disk: \"\",\r\n  });\r\n  const handleChange = (e) => {\r\n    console.log(selectedPlanId);\r\n    setSelectedPlanId(e.target.value);\r\n    setPreserveDisk(e.target.checked);\r\n    setFormData({\r\n      ...formData,\r\n      vms_id: e.target.value,\r\n      preserve_disk: e.target.checked,\r\n    });\r\n  };\r\n\r\n  console.log(\"Form Data:\", formData);\r\n\r\n  // api vms plans\r\n  useEffect(() => {\r\n    const token = Cookies.get(\"accessToken\");\r\n    if (token) {\r\n      // console.log(\"Token found:\", token);\r\n      const FetchProject = async () => {\r\n        console.log(`Bearer ${token}`);\r\n        setIsLoading(true);\r\n        try {\r\n          const response = await fetch(\r\n            `${process.env.NEXT_PUBLIC_BACKEND_API_URL}/list-plans`,\r\n            {\r\n              method: \"GET\",\r\n              headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                Authorization: `Bearer ${token}`, // Send the token\r\n              },\r\n            }\r\n          );\r\n          const result = await response.json();\r\n          const data = result.data;\r\n          console.log(data);\r\n          setPlans(result.data.vms);\r\n        } catch (error) {\r\n          console.error(\"Error fetching cloud vps plan data:\", error);\r\n          setIsLoading(false);\r\n        }\r\n      };\r\n      FetchProject();\r\n    }\r\n  }, []);\r\n\r\n  const handleUpgrade = async () => {\r\n    setErrorMessage(\"\");\r\n    setStatusMessage(\"\");\r\n   \r\n    try {\r\n      const token = Cookies.get(\"accessToken\");\r\n      const response = await fetch(\r\n        `${process.env.NEXT_PUBLIC_BACKEND_API_URL}/server/${selectedServerId}/upgrade`,\r\n        {\r\n          method: \"POST\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n          body: JSON.stringify([formData]),\r\n        }\r\n      );\r\n\r\n      const data = await response.json();\r\n\r\n      if (response.ok) {\r\n        setStatusMessage(statusMessage);\r\n      } else {\r\n        setErrorMessage(data.message || \"Upgrade failed.\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Upgrade error:\", error);\r\n      setErrorMessage(\"Something went wrong. Please try again.\");\r\n    }\r\n  };\r\n\r\n  // auto load\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  useEffect(() => {\r\n    // Simulate loading\r\n    const timer = setTimeout(() => {\r\n      setIsLoading(false);\r\n    }, 900);\r\n    return () => clearTimeout(timer);\r\n  }, []);\r\n\r\n  return (\r\n    <Fragment>\r\n      <div className=\"position-relative\">\r\n        {/* Overlay loader */}\r\n        {isLoading && (\r\n          <div\r\n            className=\"d-flex justify-content-center align-items-center position-fixed top-0 start-0 w-100 h-100\"\r\n            style={{\r\n              background: \"var(--bodybg-color)\",\r\n              zIndex: 1000,\r\n            }}\r\n          >\r\n            <div className=\"spinner-border text-primary\" role=\"status\">\r\n              <span className=\"visually-hidden\">Loading...</span>\r\n            </div>\r\n          </div>\r\n        )}\r\n        <main\r\n          className={`page-content ${isLoading ? \"pointer-events-none\" : \"\"}`}\r\n          style={{ opacity: isLoading ? 0.5 : 1 }}\r\n        >\r\n          <div className=\"container-fluid\">\r\n            {/* Breadcrumb start */}\r\n            <div className=\"row m-1\">\r\n              <div className=\"col-12\">\r\n                <h4 className=\"main-title\">Upgrade Plan </h4>\r\n                <ul className=\"app-line-breadcrumbs mb-3\">\r\n                  <li>\r\n                    <a className=\"f-s-14 f-w-500\" href=\"/server\">\r\n                      <span>\r\n                        <i className=\"ph-duotone  ph-table f-s-16\" /> Server\r\n                      </span>\r\n                    </a>\r\n                  </li>\r\n                  <li className=\"active\">\r\n                    <a className=\"f-s-14 f-w-500\" href=\"#\">\r\n                      Upgrade Plan\r\n                    </a>\r\n                  </li>\r\n                </ul>\r\n              </div>\r\n            </div>\r\n            {/* Breadcrumb end */}\r\n\r\n            {/* Projects start */}\r\n            <form method=\"POST\">\r\n              <div className=\"row cart-table\">\r\n                <div className=\"col-xl-12 col-lg-12 col-md-12\">\r\n                  <div className=\"card\">\r\n                    <div className=\"card-body\">\r\n                      <h5 className=\"mb-2 mt-5\">CPU Options</h5>\r\n\r\n                      <div className=\"row simple-pricing-container app-arrow\">\r\n                        {errorMessage && (\r\n                          <div className=\"alert alert-danger\" role=\"alert\">\r\n                            {errorMessage}\r\n                          </div>\r\n                        )}\r\n\r\n                        {statusMessage && (\r\n                          <div className=\"alert alert-success\" role=\"alert\">\r\n                            {statusMessage}\r\n                          </div>\r\n                        )}\r\n                        {plans.map((plan) => (\r\n                          <div\r\n                            key={plan.id}\r\n                            className={`col-md-6 col-xl-4 p-3`}\r\n                            onClick={() => {\r\n                              setSelectedPlanId(plan.id);\r\n                              setFormData((prev) => ({\r\n                                ...prev,\r\n                                vms_id: plan.id,\r\n                              }));\r\n                            }}\r\n                            style={{ cursor: \"pointer\" }}\r\n                          >\r\n                            <div\r\n                              className={`simple-pricing-card card ${\r\n                                selectedPlanId === plan.id\r\n                                  ? \"border border-primary shadow-lg\"\r\n                                  : \"\"\r\n                              }`}\r\n                            >\r\n                              <input type=\"hidden\" name=\"vms_id\" />\r\n                              <div className=\"card-body\">\r\n                                <div className=\"simple-price-body\">\r\n                                  <div\r\n                                    className={`simple-price-value text-center b-r-5 d-block ${\r\n                                      selectedPlanId === plan.id\r\n                                        ? \"bg-primary text-white\"\r\n                                        : \"bg-light-dark\"\r\n                                    }`}\r\n                                  >\r\n                                    <span className=\"f-s-30 f-w-600 text-center\">\r\n                                      ${plan.price}/\r\n                                    </span>\r\n                                    <span className=\"f-s-12 f-w-600\">\r\n                                      per month\r\n                                    </span>\r\n                                    <p>${(plan.price / 720).toFixed(3)}/hour</p>\r\n                                  </div>\r\n\r\n                                  <div className=\"simple-price-content\">\r\n                                    <div className=\"d-flex\">\r\n                                      <span>\r\n                                        <i\r\n                                          className={`ph-bold ph-check bg-primary p-1 b-r-100 f-s-12 ${\r\n                                            selectedPlanId === plan.id\r\n                                              ? \"bg-primary text-white\"\r\n                                              : \"bg-light-dark\"\r\n                                          }`}\r\n                                        />\r\n                                      </span>\r\n                                      <p className=\"ms-2 mb-0\">\r\n                                        {plan.ram} GB / {plan.cpu} CPU\r\n                                      </p>\r\n                                    </div>\r\n                                    <div className=\"app-divider-v\" />\r\n                                    <div className=\"d-flex\">\r\n                                      <span>\r\n                                        <i\r\n                                          className={`ph-bold ph-check bg-primary p-1 b-r-100 f-s-12 ${\r\n                                            selectedPlanId === plan.id\r\n                                              ? \"bg-primary text-white\"\r\n                                              : \"bg-light-dark\"\r\n                                          }`}\r\n                                        />\r\n                                      </span>\r\n                                      <p className=\"ms-2 mb-0\">\r\n                                        {plan.disk} GB NVMe SSDs\r\n                                      </p>\r\n                                    </div>\r\n                                  </div>\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n\r\n                      <div className=\"card-header pb-0\">\r\n                        <h5>Preserve Disk Confirmation</h5>\r\n                      </div>\r\n                      <div className=\"card-body\">\r\n                        <div className=\"row\">\r\n                          <div className=\"col-12\">\r\n                            <div className=\"form-check d-flex align-items-center gap-3\">\r\n                              <div>\r\n                                <input\r\n                                  className=\"form-check-input\"\r\n                                  id=\"preserveDiskCheck\"\r\n                                  type=\"checkbox\"\r\n                                  name=\"preserve_disk\"\r\n                                  checked={formData.preserve_disk}\r\n                                  onChange={(e) =>\r\n                                    setFormData((prev) => ({\r\n                                      ...prev,\r\n                                      preserve_disk: e.target.checked,\r\n                                    }))\r\n                                  }\r\n                                />\r\n                              </div>\r\n                              <div>\r\n                                <label\r\n                                  className=\"form-check-label f-s-18\"\r\n                                  htmlFor=\"preserveDiskCheck\"\r\n                                >\r\n                                  Do you want to preserve your disk?\r\n                                </label>\r\n                                <p className=\"form-check-label-p\">\r\n                                  If selected, your existing disk data will be\r\n                                  retained during the upgrade. If not, all\r\n                                  current data on the disk will be removed.\r\n                                </p>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n\r\n                      <button\r\n                      type=\"button\"\r\n                        className=\"btn btn-primary mt-3\"\r\n                        onClick={handleUpgrade}\r\n                      >\r\n                        Upgrade Plan\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </form>\r\n            {/* Projects end */}\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </Fragment>\r\n  );\r\n}\r\nexport default UpgragePlan;\r\n"],"names":[],"mappings":"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","debugId":null}}]
}