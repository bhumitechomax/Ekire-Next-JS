{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/xampp/htdocs/next-project-EKIRE/src/app/server/page.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useRouter } from \"next/navigation\";\r\nimport React, { Fragment, useState, useEffect } from \"react\";\r\nimport Link from \"next/link\";\r\nimport Cookies from \"js-cookie\";\r\n\r\n\r\n\r\nfunction Server() {\r\n    const [servers, setServers] = useState([]);\r\n    const [serverId, setserverId] = useState(null);\r\n\r\n\r\n    const router = useRouter();\r\n\r\n    const handleRowClick = (slug) => {\r\n        router.push(`/server/${slug}`);\r\n    };\r\n\r\n    const handleCreateClick = () => {\r\n        router.push('/server/create');\r\n    };\r\n\r\n\r\n    useEffect(() => {\r\n        const token = Cookies.get(\"accessToken\");\r\n        if (token) {\r\n            // console.log(\"Token found:\", token);\r\n            const FetchServer = async () => {\r\n                console.log(`Bearer ${token}`);\r\n                setIsLoading(true);\r\n                try {\r\n                    const response = await fetch(\r\n                        `${process.env.NEXT_PUBLIC_BACKEND_API_URL}/customer/server/list`,\r\n                        {\r\n                            method: \"POST\",\r\n                            headers: {\r\n                                \"Content-Type\": \"application/json\",\r\n                                Authorization: `Bearer ${token}`, // Send the token\r\n                            },\r\n                        }\r\n                    );\r\n\r\n                    const result = await response.json();\r\n                    const data = result.data;\r\n                    console.log(data);\r\n                    setServers(data.servers);\r\n                } catch (error) {\r\n                    console.error(\"Error fetching cloud vps plan data:\", error);\r\n                    setIsLoading(false);\r\n                }\r\n            };\r\n\r\n            FetchServer();\r\n        }\r\n    }, []);\r\n\r\n    // api for delete server with popup\r\n        const confirmDelete = (serverId) => {\r\n            const swalWithBootstrapButtons = Swal.mixin({\r\n                customClass: {\r\n                    confirmButton: 'btn btn-primary ms-2',\r\n                    cancelButton: 'btn btn-danger'\r\n                },\r\n                buttonsStyling: false\r\n            });\r\n    \r\n            swalWithBootstrapButtons.fire({\r\n                title: 'Delete server?',\r\n                text: \"Are you sure you want to delete this server? This can't be undone!\",\r\n                icon: 'warning',\r\n                showCancelButton: true,\r\n                confirmButtonText: 'Yes, delete it!',\r\n                cancelButtonText: 'No, cancel!',\r\n                reverseButtons: true\r\n            }).then((result) => {\r\n                if (result.isConfirmed) {\r\n                    handleDelete(serverId, swalWithBootstrapButtons);\r\n                } else if (result.dismiss === Swal.DismissReason.cancel) {\r\n                    swalWithBootstrapButtons.fire(\r\n                        'Cancelled',\r\n                        'Your Server is safe :)',\r\n                        'error'\r\n                    );\r\n                }\r\n            });\r\n        };\r\n\r\n        const handleDelete = async (serverId, swalInstance) => {\r\n                if (!serverId) return;\r\n        \r\n                try {\r\n                    const res = await fetch(\r\n                        `${process.env.NEXT_PUBLIC_BACKEND_API_URL}/server/${serverId}/destroy`,\r\n                        {\r\n                            method: 'POST',\r\n                            headers: {\r\n                                'Content-Type': 'application/json',\r\n                                Authorization: `Bearer ${Cookies.get('accessToken')}`\r\n                            }\r\n                        }\r\n                    );\r\n        \r\n                    const result = await res.json();\r\n        \r\n                    if (res.ok && result?.data?.status === 'success') {\r\n                        swalInstance.fire(\r\n                            'Deleted!',\r\n                            'Your server has been deleted.',\r\n                            'success'\r\n                        ).then(() => {\r\n                            window.location.reload();\r\n                        });\r\n                    } else {\r\n                        swalInstance.fire(\r\n                            'Failed!',\r\n                            result.message || 'Something went wrong.',\r\n                            'error'\r\n                        );\r\n                    }\r\n        \r\n                    console.log(result);\r\n                } catch (err) {\r\n                    swalInstance.fire(\r\n                        'Error!',\r\n                        'An error occurred while deleting the server.',\r\n                        'error'\r\n                    );\r\n                    console.error(err);\r\n                }\r\n            };\r\n            // api for delete project with popup end\r\n\r\n    // auto load\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    useEffect(() => {\r\n        // Simulate loading\r\n        const timer = setTimeout(() => {\r\n            setIsLoading(false);\r\n        }, 900);\r\n        return () => clearTimeout(timer);\r\n    }, []);\r\n\r\n    // to load datatable\r\n    // useEffect(() => {\r\n    //     if (typeof window !== \"undefined\") {\r\n    //         const tables = $(\".datatable\").map(function () {\r\n    //             return $(this).DataTable();\r\n    //         });\r\n\r\n    //         return () => {\r\n    //             tables.each(function () {\r\n    //                 this.destroy();\r\n    //             });\r\n    //         };\r\n    //     }\r\n    // }, []);\r\n\r\n    return (\r\n        <Fragment>\r\n\r\n            <div className=\"position-relative\">\r\n                {/* Overlay loader */}\r\n                {isLoading && (\r\n                    <div\r\n                        className=\"d-flex justify-content-center align-items-center position-fixed top-0 start-0 w-100 h-100\"\r\n                        style={{\r\n                            background: 'var(--bodybg-color)',\r\n                            zIndex: 1000,\r\n                        }}\r\n                    >\r\n                        <div className=\"spinner-border text-primary\" role=\"status\">\r\n                            <span className=\"visually-hidden\">Loading...</span>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                <main className={`page-content  ${isLoading ? 'pointer-events-none' : ''}`} style={{ opacity: isLoading ? 0.5 : 1 }}>\r\n                    <div className=\"container-fluid\">\r\n                        {/* Breadcrumb start */}\r\n                        <div className=\"row m-1\">\r\n                            <div className=\"col-12 merge-title p-0\">\r\n                                <div>\r\n                                    <h4 className=\"main-title\">Servers</h4>\r\n                                </div>\r\n                                {/* <div className=\"text-end\">\r\n                                    <button className=\"btn btn-primary h-45 icon-btn m-2\" onClick={handleCreateClick} >\r\n                                        <i className=\"iconoir-open-new-window f-s-18\" />  Create New Server\r\n                                    </button>\r\n                                </div> */}\r\n                            </div>\r\n                        </div>\r\n                        {/* Breadcrumb end */}\r\n\r\n                        {/* Projects start */}\r\n                        <div className=\"row\">\r\n                            <div className=\"col-12\">\r\n\r\n                                <div className=\"content-wrapper\" id=\"card-container\">\r\n                                    <div className=\"card p-l-r-30\">\r\n                                        <div className=\"card-body p-0\">\r\n                                            <div className=\"app-datatable-default overflow-auto\">\r\n                                                <table className=\"datatable display app-data-table default-data-table\" id=\"example\">\r\n                                                    <thead>\r\n                                                        <tr>\r\n                                                            <th width={10}>Sr no.</th>\r\n                                                            <th>server name</th>\r\n                                                            <th>status</th>\r\n                                                            <th>ip address</th>\r\n                                                            <th>Action</th>\r\n                                                            {/*<th>total paid</th> */}\r\n                                                        </tr>\r\n                                                    </thead>\r\n                                                    <tbody>\r\n                                                        {Array.isArray(servers) && servers.map((server, index) => (\r\n                                                            <tr  >\r\n                                                                <td>{index + 1}</td>\r\n                                                                <td>{server.hostname}</td>\r\n                                                                <td>\r\n                                                                    {server.status == \"active\" ? (\r\n                                                                        <span className=\"badge bg-success-subtle text-success text-uppercase\">{server.status}</span>)\r\n                                                                        : (\r\n                                                                            <span className=\"badge bg-danger-subtle text-danger text-uppercase\">{server.status}</span>\r\n                                                                        )}\r\n                                                                </td>\r\n                                                                <td>{server.ip}</td>\r\n                                                                <td className=\"d-flex gap-2\">\r\n                                                                    <button role=\"button\"  onClick={() => handleRowClick(server.id)} className=\"badge text-white bg-success border-0 d-flex gap-2 align-items-center\">\r\n                                                                        <i className=\"ph ph-eye f-s-18\" />\r\n                                                                        View\r\n                                                                    </button>\r\n\r\n                                                                    <button onClick={() => confirmDelete(server?.id)} className=\"badge text-white bg-danger border-0 d-flex gap-2 align-items-center\">\r\n                                                                        <i className=\"ph ph-trash f-s-18\" />\r\n                                                                        Delete\r\n                                                                    </button>\r\n                                                                </td>\r\n                                                                {/* <td>{server.purchase_date}</td>\r\n                                                                <td>${server.total_paid}</td> */}\r\n                                                            </tr>\r\n                                                        ))}\r\n\r\n                                                        {/* Example static row */}\r\n                                                        {/* <tr role=\"button\" onClick={() => handleRowClick('server-alpha')}>\r\n                                                            <td >1</td>\r\n                                                            <td>Server Alpha</td>\r\n                                                            <td><span className=\"badge bg-success-subtle text-success text-uppercase\">Running</span></td>\r\n                                                            <td>193.38.248.207</td>\r\n                                                            <td>Feb 22nd, 2024</td>\r\n                                                            <td>$10</td>\r\n                                                        </tr>  */}\r\n                                                        {/* <tr>\r\n                                                            <td>2</td>\r\n                                                            <td>Server Beta</td>\r\n                                                            <td><span className=\"badge bg-success-subtle text-success text-uppercase\">Running</span></td>\r\n                                                            <td>192.168.0.101</td>\r\n                                                            <td>Feb 22nd, 2024</td>\r\n                                                            <td>$10</td>\r\n                                                        </tr> */}\r\n                                                    </tbody>\r\n                                                </table>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        {/* Projects end */}\r\n\r\n\r\n                    </div>\r\n\r\n                </main>\r\n                {/* modal 1 */}\r\n                <div aria-hidden=\"true\" aria-labelledby=\"projectCardLabel\" className=\"modal fade\" id=\"projectCard1\" tabIndex={-1}>\r\n                    <div className=\"modal-dialog\">\r\n                        <div className=\"modal-content\">\r\n                            <div className=\"modal-header\">\r\n                                <div className=\"d-flex align-items-center gap-2\">\r\n                                    <h1 className=\"modal-title fs-5\" id=\"projectCardLabel\">Add SSH Key </h1>\r\n                                    <iconify-icon icon=\"line-md:plus-circle\" className=\"animeted-plus-circle f-s-22\" />\r\n                                </div>\r\n\r\n                                <button aria-label=\"Close\" className=\"btn-close\" data-bs-dismiss=\"modal\" type=\"button\" />\r\n                            </div>\r\n                            <div className=\"modal-body\">\r\n                                <form className=\"app-form rounded-control  row g-3\">\r\n                                    <div className=\"col-12\">\r\n                                        <label className=\"form-label\" htmlFor=\"validationDefault01\">Name</label>\r\n                                        <input className=\"form-control\" id=\"validationDefault01\" type=\"text\" placeholder=\"Enter SSH Key Name\" required />\r\n                                    </div>\r\n                                    <div className=\"col-12\">\r\n                                        <label className=\"form-label\" htmlFor=\"validationDefault02\">SSH Key</label>\r\n                                        <textarea className=\"form-control\" id=\"validationDefault02\" type=\"text\" placeholder=\"Enter SSH Key Value\" required />\r\n                                    </div>\r\n                                </form>\r\n                            </div>\r\n                            <div className=\"modal-footer\">\r\n                                <button className=\"btn btn-secondary\" data-bs-dismiss=\"modal\" type=\"button\">Cancel</button>\r\n                                <button className=\"btn btn-primary\" id=\"addCard\" type=\"button\">Submit</button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </Fragment>\r\n    );\r\n}\r\nexport default Server;\r\n"],"names":[],"mappings":"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","debugId":null}}]
}